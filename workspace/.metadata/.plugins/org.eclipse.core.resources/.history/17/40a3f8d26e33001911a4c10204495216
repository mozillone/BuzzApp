package ApiTestCases;

import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;
import org.testng.annotations.DataProvider;
import org.testng.annotations.Test;

import com.jayway.restassured.RestAssured;
import com.jayway.restassured.response.Response;
import com.jayway.restassured.specification.RequestSpecification;

public class MobileResponsiveApi {
	
	public MobileResponsiveApi() {
		
	}
	
	@SuppressWarnings("unchecked")
	@Test
	public void Verify_CheckAvailabilityApi() throws ParseException{
		RestAssured.baseURI = "http://beta.discover-prospects.com:8086/v4";

		RequestSpecification request = RestAssured.given().header("Authorization",
				"Bearer 5e0a50d50229b7f0a49c2c6f814e01a9258ac927");

		request.header("Content-Type", "application/json");

		JSONObject requestParams = new JSONObject();
		
		requestParams.put("url", "www.pizzahut.com");
		
		request.body(requestParams.toString());

		Response response = request.post("/website/responsive");
		
		//String responseBody = response.getBody().asString();
		
		String responseBody = response.getBody().prettyPrint();
		
		System.out.println("Response Body is =>" + responseBody);
		
		//JSONParser jp = new JSONParser();

		/*JSONObject jsonResult = (JSONObject) (jp.parse(responseBody));
		
		JSONObject jsonStatus = (JSONObject) (jsonResult.get("status"));

		JSONObject JsonMeta = (JSONObject) (jsonResult.get("meta"));

		JSONObject jsonFP = (JSONObject) (jsonResult.get("result"));
		
		String Status = jsonFP.get("status").toString();
		System.out.println(Status);
		
		String fp_id = jsonFP.get("fp_id").toString();
		System.out.println(fp_id);
		
		String  reference_id= JsonMeta.get("request_reference_id").toString();
		System.out.println(reference_id);*/
		
		

	}
	@DataProvider
	public Object[][] getBuzzApiTestData() throws InvalidFormatException {
		Object data[][] = Util.ExcelReader.getTestData(sheetName);
		return data;
	}
}


